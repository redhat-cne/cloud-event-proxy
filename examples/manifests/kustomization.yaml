apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
resources:
- namespace.yaml
- service.yaml
- auth/service-account.yaml
- auth/rbac.yaml
- auth/client-cert-service.yaml
- auth/ca-bundle-configmap.yaml
- consumer.yaml

# Authentication resources are automatically created by setup-secrets.sh script:
# - consumer-client-certs: Generated by Service CA via client-cert-service.yaml
# - server-ca-bundle: Created from Service CA ConfigMap
# - consumer-auth-config: Created with dynamic CLUSTER_NAME from environment variable
replicas:
- count: 1
  name: cloud-consumer-deployment
images:
- name: cloud-event-consumer
  newName: quay.io/redhat-cne/cloud-event-consumer
  newTag: latest
